<% #  This file is app/views/movies/index.html.erb %>
<head>
    <%= stylesheet_link_tag 'default' %>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Exo+2" rel="stylesheet">
</head>
<body>
    <div id="main-container" class="container-fluid">
        <div class="row">
            <form class="form-inline">
                <%= form_tag movies_path, :id => "search bar", :method => :get do %>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                        <%= text_field_tag :search, params[:search], :class => "form-control", :id => "extend" %>
                    </div>
                    <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
                        <%= submit_tag "Search", :id => "search_submit",  :class => "btn" %>
                    </div>
                <% end %>
            </form>
        </div>
        <br/>
        <br>
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                <%= image_tag ("White_Prime_Video_Logo.png"), :class => 'Logo'%>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                <%= image_tag ("Hulu_Logo.png"), :class => 'Logo'%>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                <%= image_tag ("Netflix_Logo.png"), :class => 'Logo'%>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                <%= image_tag ("White_Youtube_Logo.png"), :class => 'Logo'%>
            </div>
        </div>
        </br>
        <br/>
        <br/>
        <div class="row">
            <%= form_tag movies_path, :id=>'ratings_form', :method => :get do %>
              Include:
              <% @all_ratings.each do |rating| %>
                <%= rating %>
                <%= check_box_tag "ratings[#{rating}]", 1, ( @ratings[rating]),  :id=>"ratings[#{rating}]" %>
              <% end %>
              <%= submit_tag 'Refresh', :id=>"ratings_submit" %>
            <% end %>
            <table id="movies" class="table table-dark">
              <thead>
                <tr>
                  <th class="<%= ("hilite" if @sort_by == "title") %>">
                    <%= link_to 'Movie Title', movies_path(:sort_by => 'title', :ratings=>@ratings), :id=> "title_header"  %>
                  </th>

                  <% # Highlight the header     #Create the link      #set sort to 'title' %>
                  <th>Provider</th>
                  <th class="<%= ("hilite" if @sort_by == "release_date") %>">
                    <%= link_to 'Release Date', movies_path(:sort_by => 'release_date', :ratings=>@ratings), :id => "release_date_header"%>
                  </th>

                  <% # Highlight the header     #Create the link      #set sort to 'release_date' %>
                  <th>More Info</th>
                </tr>
              </thead>
              <tbody>
                <% @movies.each do |movie| %>
                  <tr>
                    <td>
                      <%= movie.title %>
                    </td>
                    <td>
                      <%= movie.rating %>
                    </td>
                    <td>
                      <%= movie.release_date %>
                    </td>
                    <td>
                      <%= link_to "More about #{movie.title}", movie_path(movie) %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
        </div>
    </div>
</body>