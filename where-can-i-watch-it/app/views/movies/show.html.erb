<% # in app/views/movies/show.html.haml %>
<h2>Details about <%=@movie.title %></h2>
<ul id="details">
  <li>
    Rating:
    <%= @movie.rating %>
  </li>
  <li>
    Released on:
    <%= @movie.release_date.strftime("%B %d, %Y") %>
  </li>
</ul>
<h3>Description:</h3>
<p id="description">
  <%= @movie.description %>
</p>

<h3>Comments (<%= @movie.comments.size %>)</h3>
<%= render partial: 'movies/comment', collection: @movie.comments %>
<%= render partial: 'movies/form' %>

<%= link_to 'Edit', edit_movie_path(@movie) %>
<%= button_to 'Delete', movie_path(@movie), :method => :delete, :confirm => 'Are you sure?', :class => 'btn' %>

</br>
<%- unless current_user.favorite_movies.exists?(id: @movie.id) -%>
<%= link_to 'Add to favorites', favorite_movies_path(movie_id: @movie), method: :post %>
<%- else -%>
<%= link_to 'Remove from favorites', favorite_movie_path(@movie), method: :delete %>
<%- end -%>
</br>
<%= link_to 'Favorites list', favorites_path, method: :get %>
<%= link_to 'Back to movie list', movies_path %>